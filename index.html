
<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jeu Coquin â€” v2.3 FIXED</title>
<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {font-family:'Poppins',sans-serif;background:linear-gradient(180deg,#1a0006,#0b0b0b);color:#f5f5f5;margin:0;padding:0;min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;}
h1 {color:#ff6aa6;text-align:center;margin:20px;font-size:28px;}
.card {background:rgba(20,20,20,0.95);border-radius:24px;padding:24px;margin:20px auto;max-width:640px;box-shadow:0 8px 30px rgba(255,50,100,0.25);text-align:center;animation:fadein 0.45s;}
.icon {font-size:44px;margin-bottom:12px;}
button {display:block;width:88%;margin:12px auto;padding:14px;border-radius:20px;border:none;background:#ff6aa6;color:white;font-size:18px;font-weight:600;box-shadow:0 6px 18px rgba(0,0,0,0.4);transition:transform 0.08s;}
button:active {transform:scale(0.97);}
textarea {width:88%;padding:12px;border-radius:12px;border:none;margin:10px auto;display:block;font-size:15px;background:#111;color:#fff;}
.footer {font-size:12px;color:#aaa;text-align:center;margin:18px;}
small.note {display:block;color:#ff9; margin-top:8px;}
@keyframes fadein {from {opacity:0; transform:translateY(8px);} to {opacity:1; transform:translateY(0);}}
</style>
</head>
<body>
<h1>ðŸ”¥ Jeu Coquin â€” v2.3 (FIXED)</h1>

<div id="setup" class="card">
  <p style="margin:0 0 12px 0;">Appuie sur <strong>Commencer</strong> â€” les 40 dÃ©fis photo/vidÃ©o arriveront d'abord.</p>
  <button onclick="startGame()">ðŸš€ Commencer</button>
  <small class="note">Les dÃ©fis photo/vidÃ©o sont montrÃ©s en premier (shuffled). Respect et consentement obligatoires.</small>
</div>

<div id="game" style="display:none;width:100%;">
  <div id="card" class="card" aria-live="polite">
    <div id="cardIcon" class="icon"></div>
    <div id="cardText" style="font-size:20px;line-height:1.45;"></div>
  </div>
  <button id="nextBtn" onclick="nextCard()">ðŸŽ² Carte suivante</button>

  <div class="card">
    <h3>âž• Ajouter un dÃ©fi</h3>
    <textarea id="newCardText" rows="3" placeholder="Ã‰cris un dÃ©fi..."></textarea>
    <button onclick="addCard()">Ajouter</button>
  </div>
</div>

<div class="footer">Consentement et respect avant chaque dÃ©fi.<br><small>Version v2.3-fixed</small></div>

<script>
const data = {"photo_cards": [{"text": "(Femme) Jean entrouvert, main prÃªte Ã  descendre.", "icon": "ðŸ“¸"}, {"text": "(Femme) Main sous t-shirt arrÃªtÃ©e juste avant.", "icon": "ðŸ“¸"}, {"text": "(Femme) Tire un peu sur ton sous-vÃªtement et prends une photo.", "icon": "ðŸ“¸"}, {"text": "(Femme) Serviette qui tient Ã  peine.", "icon": "ðŸ“¸"}, {"text": "(Femme) Chemise entrouverte, bouton de trop dÃ©fait.", "icon": "ðŸ“¸"}, {"text": "(Femme) Main remontant le long de la cuisse.", "icon": "ðŸ“¸"}, {"text": "(Femme) Photo assise, jambes entrouvertes, main en attente.", "icon": "ðŸ“¸"}, {"text": "(Femme) AllongÃ©e, main trÃ¨s bas sur le ventre.", "icon": "ðŸ“¸"}, {"text": "(Femme) Joue avec la bordure de ton sous-vÃªtement.", "icon": "ðŸ“¸"}, {"text": "(Femme) Comme si tu enlevais un vÃªtement mais stoppÃ©e.", "icon": "ðŸ“¸"}, {"text": "(Homme) Torse nu, main descendant vers le bas.", "icon": "ðŸ“¸"}, {"text": "(Homme) Photo en caleÃ§on entrouvert.", "icon": "ðŸ“¸"}, {"text": "(Homme) Tire sur ta ceinture.", "icon": "ðŸ“¸"}, {"text": "(Homme) AllongÃ©, main trÃ¨s bas sur le ventre.", "icon": "ðŸ“¸"}, {"text": "(Homme) Torse nu devant miroir, regard provocant.", "icon": "ðŸ“¸"}, {"text": "(Homme) Jean entrouvert prÃªt Ã  descendre.", "icon": "ðŸ“¸"}, {"text": "(Homme) Main posÃ©e Ã  lâ€™intÃ©rieur de la cuisse.", "icon": "ðŸ“¸"}, {"text": "(Homme) Retire ton t-shirt et capture.", "icon": "ðŸ“¸"}, {"text": "(Homme) En boxer, main prÃªte Ã  descendre.", "icon": "ðŸ“¸"}, {"text": "(Homme) Torse nu, partiellement couvert par un drap.", "icon": "ðŸ“¸"}], "video_cards": [{"text": "(Femme) VidÃ©o: retire doucement une chaussette ou vÃªtement.", "icon": "ðŸŽ¥"}, {"text": "(Femme) VidÃ©o sous un drap qui glisse.", "icon": "ðŸŽ¥"}, {"text": "(Femme) VidÃ©o: tire lentement sur ton haut ou jupe.", "icon": "ðŸŽ¥"}, {"text": "(Femme) Approche ta bouche de la camÃ©ra pour un baiser.", "icon": "ðŸŽ¥"}, {"text": "(Femme) Chuchote un mot excitant en vidÃ©o.", "icon": "ðŸŽ¥"}, {"text": "(Femme) Tes doigts disparaissent sous un tissu (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Femme) DÃ©boutonne un vÃªtement lentement (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Femme) SoulÃ¨ve un peu ton haut puis arrÃªte (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Femme) AllongÃ©e, main qui descend lentement (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Femme) Joue avec la bordure de ton sous-vÃªtement (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Homme) VidÃ©o: dÃ©fais lentement ta ceinture.", "icon": "ðŸŽ¥"}, {"text": "(Homme) Passe ta main sur ta cuisse en jean (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Homme) Montre ton torse nu comme si tu sortais de la douche.", "icon": "ðŸŽ¥"}, {"text": "(Homme) Retire ton t-shirt lentement (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Homme) Souffle un baiser vers la camÃ©ra en vidÃ©o.", "icon": "ðŸŽ¥"}, {"text": "(Homme) Ouvre ton pantalon avec lenteur (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Homme) EnlÃ¨ve un vÃªtement piÃ¨ce par piÃ¨ce (vidÃ©o).", "icon": "ðŸŽ¥"}, {"text": "(Homme) Torse nu, main descendant vers le bas en vidÃ©o.", "icon": "ðŸŽ¥"}, {"text": "(Homme) En boxer, provocant devant le miroir en vidÃ©o.", "icon": "ðŸŽ¥"}, {"text": "(Homme) Passe la main sous ton t-shirt en vidÃ©o.", "icon": "ðŸŽ¥"}], "normal_cards": [{"text": "Embrasse ton/ta partenaire pendant 10 secondes.", "icon": "ðŸ’‹"}, {"text": "Fais un cÃ¢lin torride pendant 30 secondes.", "icon": "ðŸ¤—"}, {"text": "Danse de faÃ§on sexy pendant 1 minute.", "icon": "ðŸ’ƒ"}, {"text": "PrÃ©pare un petit verre/cocktail pour ton/ta partenaire.", "icon": "ðŸ¸"}, {"text": "Avoue un fantasme secret.", "icon": "ðŸ”"}, {"text": "DÃ©cris ce que tu aimerais faire Ã  ton/ta partenaire.", "icon": "ðŸ‘…"}, {"text": "Mets une musique sensuelle et bouge dessus.", "icon": "ðŸŽ¶"}, {"text": "Laisse ton/ta partenaire choisir ton prochain dÃ©fi.", "icon": "ðŸŽ²"}, {"text": "Masse doucement les Ã©paules de ton/ta partenaire.", "icon": "ðŸ’†"}, {"text": "Fais un baiser dans le cou de ton/ta partenaire.", "icon": "ðŸ˜˜"}, {"text": "Regarde ton/ta partenaire intensÃ©ment 20 secondes.", "icon": "ðŸ‘€"}, {"text": "Fais semblant de chuchoter quelque chose de trÃ¨s coquin.", "icon": "ðŸ—£ï¸"}, {"text": "Offre une caresse lente sur le bras/jambe de ton/ta partenaire.", "icon": "âœ‹"}, {"text": "Chante une chanson de faÃ§on sensuelle.", "icon": "ðŸŽ¤"}, {"text": "Fais rire ton/ta partenaire avec un strip-tease drÃ´le.", "icon": "ðŸ¤£"}, {"text": "Ã‰changez vos vÃªtements pendant 1 tour.", "icon": "ðŸ‘•"}, {"text": "Choisis une partie du corps de ton/ta partenaire et embrasse-la.", "icon": "â¤ï¸"}, {"text": "Souffle doucement Ã  lâ€™oreille de ton/ta partenaire.", "icon": "ðŸ‘‚"}, {"text": "Fais un compliment torride Ã  ton/ta partenaire.", "icon": "ðŸ”¥"}, {"text": "Donne un baiser sur la main comme au cinÃ©ma.", "icon": "ðŸ¤µ"}, {"text": "Invente un surnom sexy pour ton/ta partenaire.", "icon": "ðŸ’Œ"}, {"text": "Fais un bisou rapide sur plusieurs parties du visage.", "icon": "ðŸ˜˜"}, {"text": "Tiens la main de ton/ta partenaire pendant 1 minute.", "icon": "âœ‹"}, {"text": "DÃ©cris le souvenir le plus hot que vous avez ensemble.", "icon": "ðŸ§ "}, {"text": "Offre ton plus beau sourire coquin.", "icon": "ðŸ˜‰"}, {"text": "Ã‰changez un objet personnel pour 1 tour.", "icon": "ðŸŽ"}, {"text": "Regarde ton/ta partenaire sans parler pendant 1 minute.", "icon": "âŒ›"}, {"text": "Donne un ordre coquin Ã  ton/ta partenaire.", "icon": "ðŸ“¢"}, {"text": "Mime ton fantasme prÃ©fÃ©rÃ©.", "icon": "ðŸŽ­"}, {"text": "Fais une danse lente avec ton/ta partenaire.", "icon": "ðŸ•º"}]};

// Shuffle helper
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

let deck = []; // will contain objects {text, icon}
let currentCard = null;

function buildDeck(){ 
  const pv = shuffle(data.photo_cards.concat(data.video_cards)); // all photo+video shuffled together
  const normal = shuffle(data.normal_cards.slice()); // copy then shuffle normal
  deck = pv.concat(normal); // PV first, then normal
}

// Show card object
function showCardObj(c){
  currentCard = c;
  const iconEl = document.getElementById('cardIcon');
  const textEl = document.getElementById('cardText');
  iconEl.textContent = c.icon || 'ðŸ”¥';
  textEl.textContent = c.text;
  // subtle pulse
  const cardEl = document.getElementById('card');
  cardEl.style.opacity = 0.98;
  cardEl.style.transform = 'translateY(0px)';
}

// Start game
function startGame(){
  buildDeck();
  document.getElementById('setup').style.display='none';
  document.getElementById('game').style.display='block';
  nextCard();
}

// Next card (called by button)
function nextCard(){
  if(!deck || deck.length===0){
    alert('Plus de cartes â€” rÃ©initialisation.');
    buildDeck();
  }
  const c = deck.shift();
  if(c) showCardObj(c);
  // if deck becomes empty, keep button to rebuild
}

// Add custom card (goes to the end of the deck)
function addCard(){
  const txt = document.getElementById('newCardText').value.trim();
  if(txt.length < 3) return;
  deck.push({text: txt, icon: 'ðŸ”¥'});
  document.getElementById('newCardText').value = '';
  alert('DÃ©fi ajoutÃ© Ã  la fin du paquet.');
}
</script>
</body>
</html>
